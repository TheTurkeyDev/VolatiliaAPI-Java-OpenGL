#version 140

in vec2 textureCoords;
vec2 editedTextureCoords;

out vec4 out_Colour;

uniform sampler2D colourTexture;

uniform float doContrastChange;
uniform float doColorShift;
uniform float doWaterEffect;
uniform float doGrayScale;

uniform float offset = 0;

const float contrast = 0.3;
const float rChange = 0.0;
const float gChange = 0.1;
const float bChange = 0.2;

void changeContrast()
{
	out_Colour.rgb = (out_Colour.rgb - 0.5) * (1.0 + contrast) + 0.5;
}

void changeColor()
{
	out_Colour.r += rChange;
	out_Colour.g += gChange;
	out_Colour.b += bChange;
}

void waterEffect()
{
  	editedTextureCoords.x += sin(editedTextureCoords.y * 4*2*3.14159 + offset) / 100;
}

void grayScale()
{
	float gray = dot(out_Colour.rgb, vec3(0.299, 0.587, 0.114));
	out_Colour.r = gray;
	out_Colour.g = gray;
	out_Colour.b = gray;
}

void main(void)
{
	editedTextureCoords = textureCoords;
	if(doWaterEffect == 1.0)
		waterEffect();
	out_Colour = texture(colourTexture, editedTextureCoords);
	if(doContrastChange == 1.0)
		changeContrast();
	if(doColorShift == 1.0)
		changeColor();
	if(doGrayScale == 1.0)
		grayScale();
		
}